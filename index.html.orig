<!DOCTYPE html>
<<<<<<< HEAD
<html lang="en">
  <head>
	<meta charset="UTF-8">
	<link rel="styesheet" href="default.css"/>
	<script type="text/javascript" src="joypain.js"></script>
	<title>Joy & Pain Map</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.css' rel='stylesheet' />
	<link rel="stylesheet" href="http://js.arcgis.com/3.12/esri/css/esri.css">
	<script src="http://js.arcgis.com/3.12/"></script>
	<link rel="stylesheet" href="http://js.arcgis.com/3.12/dijit/themes/nihilo/nihilo.css">
	 <script>
     

    
     
    </script>
	<style>
	body { margin:0; }
	#map { position:absolute; top:100px;left:100px; bottom:0; width:50%; }
	</style>
  </head>
  

  <body class="nihilo">
	<div id="text">Practice Joy and Pain Map</div>
	
  <div id="mainWindow" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'headline'">
    <div id="header" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
      <span>Draw:<br /></span>
      <button data-dojo-type="dijit/form/Button">Point</button>
      <button data-dojo-type="dijit/form/Button">Multi Point</button>
      <button data-dojo-type="dijit/form/Button">Line</button>
      <button data-dojo-type="dijit/form/Button">Polyline</button>
      <button data-dojo-type="dijit/form/Button">Polygon</button>
      <button data-dojo-type="dijit/form/Button">Freehand Polyline</button>
      <button data-dojo-type="dijit/form/Button">Freehand Polygon</button>
      <!--The Arrow,Triangle,Circle and Ellipse types all draw with the polygon symbol-->
      <button data-dojo-type="dijit/form/Button">Arrow</button>
      <button data-dojo-type="dijit/form/Button">Triangle</button>
      <button data-dojo-type="dijit/form/Button">Circle</button>
      <button data-dojo-type="dijit/form/Button">Ellipse</button>
    </div>
    <div id="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'"></div>
  </div>
    <script>
		L.mapbox.accessToken = 'pk.eyJ1IjoianRyZWlua2UiLCJhIjoiaHF3VDZDMCJ9.vcDB3i-OmaAFJvOfpD6M_Q';
		var map = L.mapbox.map('map', 'jtreinke.l8090480')
		.setView([45, -93.00], 12);
	</script>
  </body>
  
  
  </html>
	
=======
<html>
  <head>
   <meta charset="UTF-8">
	<link rel="stylesheet" href="default.css"/>
	<title>Joy & Pain Map</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.css' rel='stylesheet' />
	<link rel="stylesheet" href="http://js.arcgis.com/3.12/esri/css/esri.css">
	<link rel="stylesheet" href="http://js.arcgis.com/3.12/dijit/themes/nihilo/nihilo.css">
    <style>
      html, body, #mainWindow {
        font-family: sans-serif; 
        height: 100%; 
        width: 100%; 
      }
      html, body {
        margin: 0; 
        padding: 0;
      }
      #header {
        height: 80px; 
        overflow: auto;
        padding: 0.5em;
      }
    </style>
    
  </head>
  <body class="nihilo">

  <div id="mainWindow" data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="design:'headline'">
    <div id="header" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
      <span>Draw Joy:<br /></span>
      <div id="joy" data-dojo-type="dijit/layout/ContentPane">
        <button data-tool-name="POINT" data-dojo-type="dijit/form/Button">Point</button>
        <button data-tool-name="MULTIPOINT" data-dojo-type="dijit/form/Button">Multi Point</button>
        <button data-tool-name="LINE" data-dojo-type="dijit/form/Button">Line</button>
        <button data-tool-name="POLYLINE" data-dojo-type="dijit/form/Button">Polyline</button>
        <button data-tool-name="POLYGON" data-dojo-type="dijit/form/Button">Polygon</button>
        <button data-tool-name="FREEHAND_POLYLINE" data-dojo-type="dijit/form/Button">Freehand Polyline</button>
        <button data-tool-name="FREEHAND_POLYGON" data-dojo-type="dijit/form/Button">Freehand Polygon</button>
        <button data-tool-name="ARROW" data-dojo-type="dijit/form/Button">Arrow</button>
        <button data-tool-name="TRIANGLE" data-dojo-type="dijit/form/Button">Triangle</button>
        <button data-tool-name="CIRCLE" data-dojo-type="dijit/form/Button">Circle</button>
        <button data-tool-name="ELLIPSE" data-dojo-type="dijit/form/Button">Ellipse</button>
      </div>
      <span>Draw Pain:<br /></span>
      <div id="pain" data-dojo-type="dijit/layout/ContentPane">
        <button data-tool-name="POINT" data-dojo-type="dijit/form/Button">Point</button>
        <button data-tool-name="MULTIPOINT" data-dojo-type="dijit/form/Button">Multi Point</button>
        <button data-tool-name="LINE" data-dojo-type="dijit/form/Button">Line</button>
        <button data-tool-name="POLYLINE" data-dojo-type="dijit/form/Button">Polyline</button>
        <button data-tool-name="POLYGON" data-dojo-type="dijit/form/Button">Polygon</button>
        <button data-tool-name="FREEHAND_POLYLINE" data-dojo-type="dijit/form/Button">Freehand Polyline</button>
        <button data-tool-name="FREEHAND_POLYGON" data-dojo-type="dijit/form/Button">Freehand Polygon</button>
        
        <button data-tool-name="ARROW" data-dojo-type="dijit/form/Button">Arrow</button>
        <button data-tool-name="TRIANGLE" data-dojo-type="dijit/form/Button">Triangle</button>
        <button data-tool-name="CIRCLE" data-dojo-type="dijit/form/Button">Circle</button>
        <button data-tool-name="ELLIPSE" data-dojo-type="dijit/form/Button">Ellipse</button>
      </div>
      <span>Edit</span>
      <div id="editing" data-dojo-type="dijit/layout/ContentPane">
        <button data-tool-name="MOVE" data-dojo-type="dijit/form/Button">Move</button>
      </div>
    </div>
    <div id="map" data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'"></div>
  </div>
	
	<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.5/mapbox.js'></script>
	<script src="http://js.arcgis.com/3.12/"></script>
	<!--<script type="text/javascript" src="joypain.js"></script>-->
	<!-- <script>L.mapbox.accessToken = 'pk.eyJ1IjoianRyZWlua2UiLCJhIjoiaHF3VDZDMCJ9.vcDB3i-OmaAFJvOfpD6M_Q';
	var map = L.mapbox.map('map', 'jtreinke.l8090480')
	.setView([45, -93.00], 12);</script> -->
	<script>
      var map, joy_toolbar, pain_toolbar, symbol, geomTask, drawing;

      require([
        "esri/map", 
		    "esri/layers/WebTiledLayer",
        "esri/toolbars/draw",
        "esri/toolbars/edit",
        "esri/graphic",
        "esri/symbols/SimpleMarkerSymbol",
        "esri/symbols/SimpleLineSymbol",
        "esri/symbols/SimpleFillSymbol",

        "dojo/parser", "dijit/registry",

        "dijit/layout/BorderContainer", "dijit/layout/ContentPane", 
        "dijit/form/Button", "dijit/WidgetSet", "dojo/domReady!"
      ], function(
        Map,
		WebTiledLayer,
		Draw,
    Edit, 
		Graphic, 
        SimpleMarkerSymbol, 
		SimpleLineSymbol, 
		SimpleFillSymbol,
        parser, 
		registry
      ) {
        parser.parse();
		
		var pencilMap = new WebTiledLayer("http://api.tiles.mapbox.com/v4/mmcfarlane83.lm01cdj5/${level}/${col}/${row}.png?access_token=pk.eyJ1IjoianRyZWlua2UiLCJhIjoiaHF3VDZDMCJ9.vcDB3i-OmaAFJvOfpD6M_Q");
		
        map = new Map("map", {
          center: [-93.17, 44.96],
		  zoom: 12
        });
		
		map.on("load", createToolbars);
        map.addLayer(pencilMap);
		
  

        // loop through all dijits, connect onClick event
        // listeners for buttons to activate drawing tools
        registry.forEach(function(d) {
          // d is a reference to a dijit
          // could be a layout container or a button
          if ( d.declaredClass === "dijit.form.Button" ) {
            d.on("click", activateTool);
          }
        });

        function activateTool() {
          var tool = this.get("data-tool-name");
          var joy_pain = this.getParent().get("id");
          if (joy_pain === "joy"){
            joy_toolbar.activate(Draw[tool]);
          }
          else if (joy_pain === "pain"){
            pain_toolbar.activate(Draw[tool]);
          }
         
          
          map.hideZoomSlider();
        }

        function createToolbars() {
          joy_toolbar = new Draw(map);
          pain_toolbar = new Draw(map);
          edit_toolbar = new Edit(map);
          
          var edit_listener = map.graphics.on("click", function(e){
            if (!drawing) {
              edit_toolbar.activate(Edit.MOVE, e.graphic);
            }
          });

          joy_toolbar.on("activate", function(e){
            console.log("joy: draw starting");
            drawing = true;
          });
          pain_toolbar.on("activate", function(e){
            console.log("pain: draw starting");
            drawing = true;
          });

          joy_toolbar.on("draw-end", function(e){
            console.log("joy: done drawing");
            drawing = false;
            addToMap(e,"joy");
          });
          pain_toolbar.on("draw-end", function(e){
            console.log("pain: done drawing");
            drawing = false;
            addToMap(e,"pain")
          });
        }

        function addToMap(evt,joy_or_pain) {
          var symbol;

          if (joy_or_pain === "joy"){
            joy_toolbar.deactivate();
          }
          else {
            pain_toolbar.deactivate();
          }
          
          map.showZoomSlider();

          switch (evt.geometry.type) {
            case "point":
            case "multipoint":

              if (joy_or_pain ==="joy"){
                symbol =  new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_SQUARE, 10,
                  new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,
                  new esri.Color([153,0,0]), 1),
                  new esri.Color([153,0,0,0.25]));
              }

              else {
                symbol =  new esri.symbol.SimpleMarkerSymbol(esri.symbol.SimpleMarkerSymbol.STYLE_SQUARE, 10,
                  new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_SOLID,
                  new esri.Color([0,153,0]), 1),
                  new esri.Color([0,153,0,0.25]));
              }
              
              break;

            case "polyline":

              if (joy_or_pain ==="joy"){
                symbol = new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASH,
			            new esri.Color([153,0,0]), 3);
              } 

              else {
                symbol = new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASH,
                  new esri.Color([0,153,0]), 3);
              }
              break;

            default:
              if (joy_or_pain ==="joy"){
                symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,
        			    new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASHDOT,
        				  new esri.Color([153,0,0]), 2),
        				  new esri.Color([153,0,0,0.25]));
              } 

              else {
                symbol = new esri.symbol.SimpleFillSymbol(esri.symbol.SimpleFillSymbol.STYLE_SOLID,
                  new esri.symbol.SimpleLineSymbol(esri.symbol.SimpleLineSymbol.STYLE_DASHDOT,
                  new esri.Color([0,153,0]), 2),
                  new esri.Color([0,153,0,0.25]));
              }
              break;
          }
          var graphic = new Graphic(evt.geometry, symbol);
   
          map.graphics.add(graphic);
        }
		

      });
    </script>
	
  </body>
</html>
>>>>>>> gh-pages
